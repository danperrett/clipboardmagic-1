#include <string>

c\clipboardmagic\bin\Debug

C:\Users\Daniel.Perrett\Documents\Projects\Projects\clipboardmagic\clipboardmagic\bin\Debug

OleAut32.lib
User32.lib
Advapi32.lib

omniORB420_rt.lib
omniDynamic420_rt.lib
omnithread40_rt.lib

C:\Secure\SourceNew\Core\ThirdParty\omniORB-4.2.0\lib\x86_win32

cdbManager = CDBInterfaceManager::createManager("HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Imtech\\ImCity\\Services\\Cutlas20");

cdbManager->logon(username.c_str(), password.c_str());

#include "../AdapterCore/cdbinterfacemanager.h"

#include <stdio.h>      /* puts, printf */
#include <time.h> 
#include <vector>
#include <windows.h>

OleAut32.lib
User32.lib
Advapi32.lib

(System::String  ^username, System::String ^password)

System.BadImageFormatException

const __wchar_t __pin * str1 = PtrToStringChars(str);

char* str2 = (char*)(void*)Marshal::StringToHGlobalAnsi(str);

using namespace System::Runtime::InteropServices;

(char*)(void*)Marshal::StringToHGlobalAnsi(_username);

A first chance exception of type 'System.IO.FileNotFoundException' occurred in mscorlib.dll

testcdbwrapper

CdbInterfaceWrapper

 ManagedClass tycoInterface = new ManagedClass();
            tycoInterface.Initialise();
            tycoInterface.Logon("10.164.114.163", "admin", "");
            int num = tycoInterface.InitiliseNumberOfCameras();

using ManagedDll;


vshost32.exe

  for (int n = 0; n < num; n++)
            {
               // string id = tycoInterface.getId(n);
                tycoInterface.StartVideo(n);
            }


int cam = tycoInterface.GetCameraNumberFromName("PREDATOR_HD");
            if (cam > -1)
            {

        /*        int numberOfPreset = tycoInterface.GetNumberOfPresets(cam);
                for (int n = 1; n < 9; n++)
                {
                    if(!tycoInterface.GotoPreset(cam, n))
                    {
                        Console.WriteLine("Could not move camera to defined preset!");
                    }

              //      Thread.Sleep(13000);
                }*/
                //tycoInterface.GotoLocation(cam, 180, 0, 2);
                //Thread.Sleep(200);
                tycoInterface.GetSnapshot(cam);
            }

10.164.114.163

   startTime = DateTime.Now.AddHours(-24);
                    endTime = DateTime.Now;

    startTime = TimeZone.CurrentTimeZone.ToUniversalTime(startTime);
            endTime = TimeZone.CurrentTimeZone.ToUniversalTime(endTime);

IVideoInSceneEntity

  m_ThumbnailsSession.GetThumbnails(stratTime, thumbnailsInterval, MAX_AMOUNT_OF_THUMBNAILS_PER_PAGE);   

thumbs

thumbnail

  MemoryStream ms = new MemoryStream();
                            image.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
                            image.Save(@"C:\Temp\Temp.jpg", System.Drawing.Imaging.ImageFormat.Jpeg);

streamingEvent

MemoryStream ms

streamingEvent

imagelocker

   streamingEvent.Set();

http://www.bbc.co.uk/news/uk-politics-38390150

championed by Brexit Secretary David Davis

10.164.114.163

/usr/bin/synergys -f --no-tray --debug INFO --name ukdt0348 -c /tmp/qt_temp.SL2321 --address :24800


10.164.114.163

IVideoInSceneEntity scene = cameras[cameraNum] as IVideoInSceneEntity;

System.Net.

ipAddress

GetDirectSnapShot

"http://" + ipAddress[cameraNum] + "/snapshot.jpg");

Stream stream = client.OpenRead(imageUrl);

client.DownloadFi

http://192.168.16.102/snapshot.jpg

 to memorystream

FileInfo file = new FileInfo("C:\\temp\\temp2.jpg");
                FileStream stream = file.OpenWrite();
                stream.Write(arr, 0, arr.Length);
                stream.Close()

 tycoInterface.GetDirectSnapShot(cam);

 FileInfo file = new FileInfo("C:\\temp\\temp2.jpg");
                FileStream stream = file.OpenWrite();
                stream.Write(arr, 0, arr.Length);
                stream.Close();

byte[] arr = tycoInterface.GetDirectSnapShot(cam);

                    FileInfo file = new FileInfo("C:\\temp\\temp" + n + ".jpg");
                    FileStream stream = file.OpenWrite();
                    stream.Write(arr, 0, arr.Length);
                    stream.Close();

8276

GetDirectSnapShot

C:\Users\Daniel.Perrett\Documents\Visual Studio 2015\Projects\ManagedDll\ManagedDll\bin\x86\Debug

C:\Users\Daniel.Perrett\Documents\Visual Studio 2015\Projects\ManagedDll\ManagedDll\bin\x86\Debug\ManagedDll.dll

C:\Users\Daniel.Perrett\Documents\Visual Studio 2015\Projects\ManagedDll\ManagedDll\bin\x86\Debug\ManagedDll.tlb


        [DispId(19)]
        byte[] GetDirectSnapShot(int cameraNum);

ogon.html

GetSnapshotUri 

POST /onvif/services HTTP/1.1 User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; MS Web Services Client Protocol 4.0.30319.42000) Content-Type: application/soap+xml; charset=utf-8; action="http://www.onvif.org/ver20/ptz/wsdl/GotoPreset" Host: 192.168.16.102 Content-Length: 1223  <?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing"><s:Header xmlns:s="http://www.w3.org/2003/05/soap-envelope"><wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"><wsse:UsernameToken><wsse:Username>admin</wsse:Username><wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest">04AS3htQZBGxoPCNDBTvOIXoSlY=</wsse:Password><wsse:Nonce>SXEY/A+4IzbpLBRs8r/LTbwQZWajLmBo3NPiwjlhMFo=</wsse:Nonce><wsu:Created>2016-12-22T13:14:49Z</wsu:Created></wsse:UsernameToken></wsse:Security></s:Header><soap:Body><GotoPreset xmlns="http://www.onvif.org/ver20/ptz/wsdl"><ProfileToken>main</ProfileToken><PresetToken>P004</PresetToken><Speed><PanTilt x="1" y="1" xmlns="http://www.onvif.org/ver10/schema" /><Zoom x="1" xmlns="http://www.onvif.org/ver10/schema" /></Speed></GotoPreset></soap:Body></soap:Envelope>

application/soap+xml

application/soap+xml; charset=utf-8; action="http://www.onvif.org/ver20/ptz/wsdl/GotoPreset"

Mozilla/4.0 (compatible; MSIE 6.0; MS Web Services Client Protocol 4.0.30319.42000)

client.Headers[HttpRequestHeader.UserAgent] = "Mozilla/4.0 (compatible; MSIE 6.0; MS Web Services Client Protocol 4.0.30319.42000)";

/onvif/services

<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing"><s:Header xmlns:s="http://www.w3.org/2003/05/soap-envelope"><wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"><wsse:UsernameToken><wsse:Username>admin</wsse:Username><wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest">04AS3htQZBGxoPCNDBTvOIXoSlY=</wsse:Password><wsse:Nonce>SXEY/A+4IzbpLBRs8r/LTbwQZWajLmBo3NPiwjlhMFo=</wsse:Nonce><wsu:Created>2016-12-22T13:14:49Z</wsu:Created></wsse:UsernameToken></wsse:Security></s:Header><soap:Body><GotoPreset xmlns="http://www.onvif.org/ver20/ptz/wsdl"><ProfileToken>main</ProfileToken><PresetToken>P004</PresetToken><Speed><PanTilt x="1" y="1" xmlns="http://www.onvif.org/ver10/schema" /><Zoom x="1" xmlns="http://www.onvif.org/ver10/schema" /></Speed></GotoPreset></soap:Body></soap:Envelope>

GotoPresetWebClient

<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing"><s:Header xmlns:s="http://www.w3.org/2003/05/soap-envelope"><wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"><wsse:UsernameToken><wsse:Username>admin</wsse:Username><wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest">04AS3htQZBGxoPCNDBTvOIXoSlY=</wsse:Password><wsse:Nonce>SXEY/A+4IzbpLBRs8r/LTbwQZWajLmBo3NPiwjlhMFo=</wsse:Nonce><wsu:Created>2016-12-22T13:14:49Z</wsu:Created></wsse:UsernameToken></wsse:Security></s:Header><soap:Body><GotoPreset xmlns="http://www.onvif.org/ver20/ptz/wsdl"><ProfileToken>main</ProfileToken><PresetToken>P004</PresetToken><Speed><PanTilt x="1" y="1" xmlns="http://www.onvif.org/ver10/schema" /><Zoom x="1" xmlns="http://www.onvif.org/ver10/schema" /></Speed></GotoPreset></soap:Body></soap:Envelope>

tycoInterface.GotoPresetWebClient(1);

tycoInterface.GotoPresetWebClient(2);

http://www.onvif.org/ver20/ptz/wsdl

http://www.onvif.org/onvif/ver10/media/wsdl/media.wsdl

www.onvif.org/ver20/ptz/wsdl/ptz.wsdl

http://www.onvif.org/ver20/ptz/wsdl/ptz.wsdl

http://www.onvif.org/onvif/ver10/media/wsdl/media.wsdl

http://www.onvif.org/ver20/ptz/wsdl/ptz.wsdl

http://192.168.16.100:5000/

onvif/services

http://www.gwelltimes.com/manage/Upload/Pic/20147914514701.jpg

http://192.168.16.100:5000/onvif/services

<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing"><s:Header xmlns:s="http://www.w3.org/2003/05/soap-envelope"><wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"><wsse:UsernameToken><wsse:Username>admin</wsse:Username><wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest">04AS3htQZBGxoPCNDBTvOIXoSlY=</wsse:Password><wsse:Nonce>SXEY/A+4IzbpLBRs8r/LTbwQZWajLmBo3NPiwjlhMFo=</wsse:Nonce><wsu:Created>2016-12-22T13:14:49Z</wsu:Created></wsse:UsernameToken></wsse:Security></s:Header><soap:Body><GotoPreset xmlns="http://www.onvif.org/ver20/ptz/wsdl"><ProfileToken>main</ProfileToken><PresetToken>P005</PresetToken><Speed><PanTilt x="1" y="1" xmlns="http://www.onvif.org/ver10/schema" /><Zoom x="1" xmlns="http://www.onvif.org/ver10/schema" /></Speed></GotoPreset></soap:Body></soap:Envelope>*/

http://www.onvif.org/onvif/ver10/media/wsdl/media.wsdl

var messageElement = new TextMessageEncodingBindingElement();

messageElement.MessageVersion = MessageVersion.CreateVersion(EnvelopeVersion.Soap12, AddressingVersion.None);

HttpTransportBindingElement httpBinding = new HttpTransportBindingElement();
httpBinding.AuthenticationScheme = AuthenticationSchemes.Basic;
CustomBinding bind = new CustomBinding(messageElement, httpBinding);
EndpointAddress mediaAddress = new EndpointAddress("http://192.168.1.168:10001/onvif/Media");

MediaClient mediaClient = new MediaClient(bind, mediaAddress);
mediaClient.ClientCredentials.UserName.UserName = "admin";
mediaClient.ClientCredentials.UserName.Password = "admin";
Profile[] profiles = mediaClient.GetProfiles();
string profileToken = profiles[1].token;
MediaUri mediaUri = mediaClient.GetSnapshotUri(profileToken);

GetSnapShotURL

http://192.168.16.100:5000/onvif/Media

http://www.onvif.org/onvif/ver10/device/wsdl/devicemgmt.wsdl

www.onvif.org/ver20/ptz/wsdl/ptz.wsdl

/onvif/services

 mediaClient.ClientCredentials.UserName.UserName = "admin";
            mediaClient.ClientCredentials.UserName.Password = "9999";

ptzClient

  Profile[] profiles = mediaClient.GetProfiles();

Hi Dan,

Relying on the recorded stream for creating snapshots (rather than on the live stream) brings about a known limitation:
Only snapshots that are older than 60 seconds from real-time are guaranteed to be returned.
This is because the VMS updates its DB in bulks, so in the time you query, the DB may not yet be aware of the newest recording section.
(This limitation applies also to the native VMS client application ? ControlCenter ? and can be witnessed there).

The way to work around it is: 
Instead of querying immediately, enqueue the query job to be performed only when the desired timestamp is already 60 seconds older than real-time.
For example ? if you want a snapshot that is right now 20 seconds old, wait another 40 seconds before querying for it.
It of course means that results are not returned immediately, but at least they are guaranteed to be returned.

I hope this is helpful.

Regards,

Boaz Arzi
Director, Applications and Integration Center

FLIR Systems, Inc.
65 Challenger Road, Ridgefield Park, NJ 07660 USA
Direct:  +1 201 708 9852 | Mobile: +1 973 906 4008
Email: boaz.arzi@flir.com | www.flir.com

From: Perrett, Daniel - UK [mailto:Daniel.Perrett@dynniq.co.uk] 
Sent: Wednesday, December 21, 2016 9:31 AM
To: FLIR AIC <AIC@flir.com>
Subject: RE: FLIR SDK Version 7

Hi,

   I?m finding that this thumbnail option is working sporadically. Even using the Provided  PlayerSample I find that it works sometime when searching back the last 24 hours and other times it doesn?t. and what I need to get a thumbnail that happens in the last second, which sometimes works, sometime comes back with not available and sometimes just doesn?t happen at all.

Can you advice please?

Cheers.
Dan



GetProfiles

IPCProfilesToken1

